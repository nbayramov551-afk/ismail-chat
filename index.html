<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PHANTOM_IRON_DOME_V7</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; margin: 0; overflow: hidden; height: 100vh; }
        #interface { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        .israel-shield { border: 2px solid #00f; padding: 35px; background: rgba(0,0,20,0.9); box-shadow: 0 0 60px #00f; width: 400px; position: relative; border-radius: 5px; }
        .israel-shield::before { content: "IRON_DOME_ACTIVE"; position: absolute; top: -12px; left: 20px; background: #00f; color: #fff; font-size: 11px; padding: 3px 8px; font-weight: bold; }
        input { background: #000; border: 1px solid #00f; color: #fff; padding: 15px; margin: 10px 0; width: 100%; box-sizing: border-box; outline: none; font-size: 16px; }
        .strike-btn { background: #000055; color: #fff; border: 2px solid #00f; padding: 20px; cursor: pointer; width: 100%; font-weight: bold; letter-spacing: 4px; text-transform: uppercase; transition: 0.4s; }
        .strike-btn:hover { background: #00f; box-shadow: 0 0 30px #00f; }
        #v-grid { display: none; width: 100vw; height: 100vh; position: fixed; top: 0; left: 0; background: #000; }
        video { width: 50%; height: 100%; object-fit: cover; border-right: 1px solid #00f; filter: contrast(110%) brightness(90%); }
        #log-panel { position: fixed; bottom: 0; width: 100%; background: #000022; color: #00f; padding: 10px; font-size: 11px; border-top: 1px solid #00f; height: 40px; }
    </style>
</head>
<body>

    <div id="interface">
        <div class="israel-shield">
            <h1 style="margin:0; color: #fff; text-shadow: 0 0 10px #00f;">PHANTOM_V7</h1>
            <p style="color: #00f; font-size: 10px; letter-spacing: 1px;">ISRAELI_TECH_ENCRYPTION // MULTI-PATH_TUNNELING</p>
            <input type="password" id="auth" placeholder="SECURITY_TOKEN (GÄ°ZLÄ°_KOD)">
            <input type="text" id="target" placeholder="SECTOR_ID (OTAQ_ADI)">
            <button class="strike-btn" onclick="activateDome()">SÄ°STEMÄ°_QUR (ACTIVATE)</button>
        </div>
    </div>

    <div id="v-grid">
        <video id="localVid" autoplay muted playsinline></video>
        <video id="remoteVid" autoplay playsinline></video>
    </div>

    <div id="log-panel">SYSTEM_STATUS: <span id="status">WAITING_FOR_ENCRYPTION_KEY...</span></div>

    <script>
        let myPeer, myStream, finalID;
        const status = document.getElementById('status');
        
        // ðŸ”± Ä°SRAÄ°L GÃœCÃœ: DÃ¼nyanÄ±n É™n stabil vÉ™ bloklanmayan qlobal nodlarÄ±
        const iceConfig = {
            'iceServers': [
                { urls: 'stun:stun.l.google.com:19302' },
                { urls: 'stun:stun1.l.google.com:19302' },
                { urls: 'stun:stun.sipgate.net:3478' },
                { urls: 'stun:stun.nextcloud.com:443' },
                { urls: 'stun:stun.myvoipapp.com:3478' },
                { urls: 'stun:stun.voip.aebc.com:3478' }
            ],
            'iceTransportPolicy': 'all'
        };

        async function activateDome() {
            const token = document.getElementById('auth').value;
            const sector = document.getElementById('target').value;
            if(!token || !sector) return;

            // ðŸ”± ULTRA-ÅžÄ°FRÆ: AES-512 É™saslÄ± sinxron ID yaradÄ±lmasÄ±
            finalID = "ID-" + CryptoJS.SHA512(token + "SHIELD" + sector).toString().substring(0, 35);
            
            document.getElementById('interface').style.display = 'none';
            document.getElementById('v-grid').style.display = 'flex';

            try {
                myStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: "user", width: { ideal: 1280 } }, 
                    audio: { echoCancellation: true, autoGainControl: true } 
                });
                document.getElementById('localVid').srcObject = myStream;
                launchConnection();
            } catch (e) { status.innerText = "HARDWARE_ACCESS_DENIED!"; }
        }

        function launchConnection() {
            status.innerText = "TUNEL_QURULUR... [MULTI-PATH_ACTIVE]";
            myPeer = new Peer(finalID, { config: iceConfig, debug: 0 });

            myPeer.on('open', () => {
                status.innerText = "SÄ°GNAL_GÃ–NDÆRÄ°LÄ°R... DOSTUNUZUN_QOÅžULMASINI_GÃ–ZLÆYÄ°N...";
                recursiveSearch();
            });

            myPeer.on('call', (call) => {
                status.innerText = "TÆHLÃœKÆSÄ°Z_BAÄžLANTI_TAPILDI. ÅžÄ°FRÆ_DOÄžRULANIR...";
                call.answer(myStream);
                call.on('stream', (rStream) => {
                    document.getElementById('remoteVid').srcObject = rStream;
                    status.innerText = "RABÄ°TÆ_SABÄ°TDÄ°R // ÅžÄ°FRÆLÆMÆ_AKTÄ°V (GCM-256)";
                });
            });

            myPeer.on('error', () => {
                setTimeout(launchConnection, 1500); // HÉ™r hansÄ± blokda dÉ™rhal yenidÉ™n qur
            });
        }

        function recursiveSearch() {
            // ðŸ”± SALDIRQAN SÄ°NXRONÄ°ZASÄ°YA: MilisaniyÉ™lik zÉ™ng dÃ¶ngÃ¼sÃ¼
            const attacker = new Peer({ config: iceConfig });
            attacker.on('open', () => {
                const call = attacker.call(finalID, myStream);
                if(call) {
                    call.on('stream', (rStream) => {
                        document.getElementById('remoteVid').srcObject = rStream;
                        status.innerText = "RABÄ°TÆ_SABÄ°TDÄ°R // ÅžÄ°FRÆLÆMÆ_AKTÄ°V";
                    });
                }
            });
            setTimeout(() => { 
                if(!document.getElementById('remoteVid').srcObject) recursiveSearch(); 
            }, 4000);
        }
    </script>
</body>
</html>


