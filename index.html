<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>OMEGA BOSS V14</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --green: #00a884; --dark: #111b21; --panel: #202c33; --txt: #e9edef; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--dark); color: var(--txt); height: 100vh; overflow: hidden; position: fixed; width: 100%; }
        
        /* AUTH */
        #auth { position: fixed; inset: 0; background: var(--dark); z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .auth-box { background: var(--panel); padding: 30px; border-radius: 20px; width: 85%; max-width: 400px; text-align: center; border: 1px solid var(--green); }
        .boss-in { width: 100%; padding: 12px; border-radius: 10px; border: none; background: #2a3942; color: #fff; margin: 15px 0; outline: none; }

        /* HEADER & SEARCH */
        .head { background: var(--panel); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
        #search-bar { background: var(--panel); padding: 10px 20px; display: none; }
        .search-in { width: 100%; background: #2a3942; border: none; padding: 10px; border-radius: 8px; color: #fff; outline: none; }

        /* TABS */
        .tabs { display: flex; background: var(--panel); border-bottom: 1px solid #2a3942; }
        .tab { flex: 1; padding: 15px; text-align: center; color: #8696a0; font-weight: 700; cursor: pointer; }
        .tab.active { color: var(--green); border-bottom: 3px solid var(--green); }
        
        /* LISTS */
        .list { flex: 1; overflow-y: auto; height: calc(100vh - 120px); }
        .row { display: flex; align-items: center; padding: 15px 20px; border-bottom: 0.5px solid #222; cursor: pointer; }
        .av { width: 50px; height: 50px; border-radius: 50%; background: #6a7175; margin-right: 15px; display: flex; align-items: center; justify-content: center; font-weight: 800; }

        /* CHAT WINDOW */
        .chat { position: fixed; inset: 0; background: #0b141a; z-index: 5000; transform: translateX(100%); transition: 0.3s; display: flex; flex-direction: column; }
        .chat.active { transform: translateX(0); }
        .msgs { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 5px; background: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png'); }
        .b { max-width: 80%; padding: 10px; border-radius: 10px; font-size: 15px; line-height: 1.4; color: #fff; }
        .m { align-self: flex-end; background: #005c4b; border-bottom-right-radius: 0; }
        .t { align-self: flex-start; background: #202c33; border-bottom-left-radius: 0; }

        /* INPUT AREA & EMOJI */
        .inp-bar { background: var(--panel); padding: 10px; display: flex; align-items: center; gap: 10px; }
        .wa-in { flex: 1; background: #2a3942; border: none; padding: 12px; border-radius: 25px; color: #fff; outline: none; }
        #emoji-box { height: 0; background: var(--panel); transition: 0.3s; overflow-y: auto; display: grid; grid-template-columns: repeat(8, 1fr); gap: 10px; padding: 0; }
        .emoji { font-size: 24px; cursor: pointer; text-align: center; }

        /* DROPDOWN MENU */
        #menu-box { position: absolute; top: 50px; right: 20px; background: var(--panel); border-radius: 8px; display: none; flex-direction: column; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .menu-item { padding: 15px 25px; border-bottom: 0.5px solid #2a3942; cursor: pointer; }

        /* CALLS */
        #call { position: fixed; inset: 0; background: #000; z-index: 20000; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .v-main { width: 100%; height: 100%; object-fit: cover; }
        .v-small { position: absolute; top: 40px; right: 20px; width: 100px; height: 150px; border: 2px solid #fff; border-radius: 10px; }
    </style>
</head>
<body>

    <div id="auth">
        <div class="auth-box">
            <h2 style="color:var(--green)">OMEGA BOSS V14</h2>
            <input type="text" id="my-name" class="boss-in" placeholder="Adƒ±nƒ±z...">
            <button onclick="login()" style="width:100%; padding:15px; background:var(--green); border:none; border-radius:10px; color:#fff; font-weight:800;">Sƒ∞STEM∆è Gƒ∞R</button>
        </div>
    </div>

    <div class="app" id="main-app" style="display:none;">
        <div class="head">
            <b style="font-size:22px; color:var(--green)">WhatsApp Boss</b>
            <div style="display:flex; gap:20px; font-size:18px; color:#8696a0;">
                <i class="fas fa-search" onclick="toggleSearch()"></i>
                <i class="fas fa-user-plus" onclick="addUser()"></i>
                <i class="fas fa-ellipsis-v" onclick="toggleMenu()"></i>
            </div>
        </div>

        <div id="search-bar">
            <input type="text" class="search-in" id="search-input" placeholder="Dost ID-si il…ô axtar..." oninput="filterChats()">
        </div>

        <div id="menu-box">
            <div class="menu-item" onclick="alert('ID-niz: ' + me.id)">Profilim</div>
            <div class="menu-item" onclick="location.reload()">√áƒ±xƒ±≈ü</div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('chats', this)">√áATLAR</div>
            <div class="tab" onclick="switchTab('status', this)">STATUS</div>
        </div>

        <div id="chats-list" class="list"></div>
        <div id="status-list" class="list" style="display:none; padding:20px;">
            <div class="row" onclick="addStatus()">
                <div class="av" style="background:var(--green)"><i class="fas fa-plus"></i></div>
                <div><b>Statusum</b><br><small>Status payla≈ümaq √º√ß√ºn toxun</small></div>
            </div>
            <div id="status-feed"></div>
        </div>
    </div>

    <div class="chat" id="chat-win">
        <div class="head">
            <div style="display:flex; align-items:center; gap:10px;" onclick="showProfile()">
                <i class="fas fa-arrow-left" onclick="event.stopPropagation(); closeChat()"></i>
                <div class="av" id="c-av" style="width:35px; height:35px; font-size:12px;"></div>
                <b id="c-title">...</b>
            </div>
            <div style="display:flex; gap:20px; color:#8696a0;">
                <i class="fas fa-video" onclick="startCall(true)"></i>
                <i class="fas fa-phone" onclick="startCall(false)"></i>
            </div>
        </div>
        <div class="msgs" id="msg-feed"></div>
        <div id="emoji-box"></div>
        <div class="inp-bar">
            <i class="far fa-smile" style="font-size:24px; color:#8696a0;" onclick="toggleEmoji()"></i>
            <input type="text" id="m-in" class="wa-in" placeholder="Mesaj yazƒ±n...">
            <button onclick="send()" style="background:none; border:none; color:var(--green); font-size:22px;"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <div id="call">
        <video id="v-rem" class="v-main" autoplay playsinline></video>
        <video id="v-loc" class="v-small" autoplay muted playsinline></video>
        <h2 id="call-stat" style="position:absolute; top:100px;">Z∆èNG EDƒ∞Lƒ∞R...</h2>
        <button onclick="location.reload()" style="position:absolute; bottom:50px; background:red; border:none; width:70px; height:70px; border-radius:50%; color:#fff; font-size:24px;"><i class="fas fa-phone-slash"></i></button>
        <button id="ans-btn" onclick="answer()" style="display:none; position:absolute; bottom:50px; left:50px; background:green; border:none; width:70px; height:70px; border-radius:50%; color:#fff; font-size:24px;"><i class="fas fa-phone"></i></button>
    </div>

    <script>
        let me, peer, activeId, myStream, currentCall;
        const KEY = "BOSS_OMEGA_SECURE_V14";
        const emojis = ["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥","üòè","üòí","üòû","üòî","üòü","üòï","üôÅ","‚òπÔ∏è","üò£","üòñ","üò´","üò©","ü•∫","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤","ü•±","üò¥","ü§§","üò™","üòµ","ü§ê","ü•¥","ü§¢","ü§Æ","ü§ß","üò∑","ü§í","ü§ï"];

        function login() {
            const n = document.getElementById('my-name').value;
            if(!n) return;
            me = { id: "BOSS-" + Math.floor(1000+Math.random()*9000), name: n };
            localStorage.setItem('boss_profile', JSON.stringify(me));
            location.reload();
        }

        window.onload = () => {
            const saved = localStorage.getItem('boss_profile');
            if(!saved) return;
            me = JSON.parse(saved);
            document.getElementById('auth').style.display = 'none';
            document.getElementById('main-app').style.display = 'flex';
            
            peer = new Peer(me.id, { config: {'iceServers': [{ urls: 'stun:stun.l.google.com:19302' }]} });
            peer.on('connection', c => c.on('data', d => recv(d)));
            peer.on('call', c => {
                currentCall = c;
                document.getElementById('call').style.display = 'flex';
                document.getElementById('ans-btn').style.display = 'block';
                document.getElementById('call-stat').innerText = "DAXƒ∞Lƒ∞ Z∆èNG...";
            });

            const eb = document.getElementById('emoji-box');
            emojis.forEach(e => {
                let s = document.createElement('span'); s.className = 'emoji'; s.innerText = e;
                s.onclick = () => document.getElementById('m-in').value += e;
                eb.appendChild(s);
            });

            renderChats();
        };

        function addUser() {
            const id = prompt("Dostun BOSS ID-si:");
            if(!id) return;
            let db = JSON.parse(localStorage.getItem('boss_db') || "[]");
            if(!db.find(x => x.id === id)) db.push({id, msgs: []});
            localStorage.setItem('boss_db', JSON.stringify(db));
            renderChats();
        }

        function renderChats() {
            const l = document.getElementById('chats-list'); l.innerHTML = "";
            const db = JSON.parse(localStorage.getItem('boss_db') || "[]");
            db.forEach(u => {
                l.innerHTML += `<div class="row chat-row" data-id="${u.id}" onclick="openChat('${u.id}')"><div class="av">${u.id[5]}</div><div><b>${u.id}</b><br><small>≈ûifrl…ônmi≈ü x…ôtt</small></div></div>`;
            });
        }

        function filterChats() {
            const q = document.getElementById('search-input').value.toLowerCase();
            document.querySelectorAll('.chat-row').forEach(r => {
                r.style.display = r.getAttribute('data-id').toLowerCase().includes(q) ? 'flex' : 'none';
            });
        }

        function openChat(id) {
            activeId = id; document.getElementById('c-title').innerText = id;
            document.getElementById('c-av').innerText = id[5];
            document.getElementById('chat-win').classList.add('active');
            renderMsgs();
        }

        function send() {
            const v = document.getElementById('m-in').value; if(!v) return;
            const m = { f: me.id, b: v, t: Date.now() };
            let db = JSON.parse(localStorage.getItem('boss_db'));
            db.find(x => x.id === activeId).msgs.push(m);
            localStorage.setItem('boss_db', JSON.stringify(db));
            
            const conn = peer.connect(activeId);
            conn.on('open', () => {
                conn.send(CryptoJS.AES.encrypt(JSON.stringify(m), KEY).toString());
                renderMsgs();
                document.getElementById('m-in').value = "";
            });
        }

        function recv(cip) {
            const d = JSON.parse(CryptoJS.AES.decrypt(cip, KEY).toString(CryptoJS.enc.Utf8));
            let db = JSON.parse(localStorage.getItem('boss_db') || "[]");
            let u = db.find(x => x.id === d.f);
            if(u) { u.msgs.push(d); localStorage.setItem('boss_db', JSON.stringify(db)); if(activeId===d.f) renderMsgs(); }
        }

        function renderMsgs() {
            const f = document.getElementById('msg-feed'); f.innerHTML = "";
            const u = JSON.parse(localStorage.getItem('boss_db')).find(x => x.id === activeId);
            u.msgs.forEach(m => {
                f.innerHTML += `<div class="b ${m.f===me.id?'m':'t'}">${m.b}</div>`;
            });
            f.scrollTop = f.scrollHeight;
        }

        function addStatus() {
            const s = prompt("Statusunuzu yazƒ±n:");
            if(!s) return;
            const feed = document.getElementById('status-feed');
            feed.innerHTML = `<div class="row"><div class="av">${me.name[0]}</div><div><b>S…ôn</b><br><small>${s}</small></div></div>` + feed.innerHTML;
        }

        async function startCall(v) {
            document.getElementById('call').style.display = 'flex';
            myStream = await navigator.mediaDevices.getUserMedia({video:v, audio:true});
            document.getElementById('v-loc').srcObject = myStream;
            currentCall = peer.call(activeId, myStream);
            currentCall.on('stream', s => document.getElementById('v-rem').srcObject = s);
        }

        async function answer() {
            document.getElementById('ans-btn').style.display = 'none';
            myStream = await navigator.mediaDevices.getUserMedia({video:true, audio:true});
            document.getElementById('v-loc').srcObject = myStream;
            currentCall.answer(myStream);
            currentCall.on('stream', s => document.getElementById('v-rem').srcObject = s);
        }

        function toggleSearch() { 
            let s = document.getElementById('search-bar');
            s.style.display = s.style.display === 'block' ? 'none' : 'block';
        }
        function toggleMenu() {
            let m = document.getElementById('menu-box');
            m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
        }
        function toggleEmoji() {
            let e = document.getElementById('emoji-box');
            e.style.height = e.style.height === '200px' ? '0' : '200px';
            e.style.padding = e.style.height === '200px' ? '10px' : '0';
        }
        function showProfile() { alert("ƒ∞stifad…ô√ßi: " + activeId + "\nStatus: Onlayn\n≈ûifr…ôl…ôm…ô: AES-256"); }
        function closeChat() { document.getElementById('chat-win').classList.remove('active'); }
        function switchTab(t, el) {
            document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('chats-list').style.display = t==='chats'?'block':'none';
            document.getElementById('status-list').style.display = t==='status'?'block':'none';
        }
    </script>
</body>
</html>

